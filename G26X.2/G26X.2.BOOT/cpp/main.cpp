#include "hw_conf.h"

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

//#define BOOT_COM
#define BOOT_EMAC
#define BOOT_HANDSHAKE
//#define BOOT_COM_MODE					ComPort::ASYNC
//#define BOOT_COM_SPEED				1562500
//#define BOOT_COM_PARITY				0
//#define BOOT_COM_STOPBITS				1
//#define BOOT_COM_PRETIMEOUT			(~0)
//#define BOOT_COM_POSTTIMEOUT			(US2COM(100))
//#define BOOT_HANDSHAKE_PRETIMEOUT		(MS2COM(100))
//#define BOOT_HANDSHAKE_POSTTIMEOUT	(US2COM(100))
//#define BOOT_SGUID					0x0A89D55DD5274785 
//#define BOOT_MGUID					0x9119CC18AC79DE35
//#define BOOT_START_SECTOR				8

//#define BOOT_START_BREAKPOINT
#define BOOT_EXIT_BREAKPOINT

#define BOOT_EMAC_TIMEOUT	150000

#define	NUM_SMALL_BUF	64       
#define	NUM_MEDIUM_BUF	32
#define	NUM_HUGE_BUF	16

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#ifdef BOOT_EMAC

#include <EMAC\emac.h>
#include <EMAC\tftp.h>

#endif

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#ifdef BOOT_COM

#include <DMA.h>
#include <ComPort_imp.h>

static ComPort com(0, 0, PIO_UTXD0, PIO_URXD0, PIO_RTS0, 0, PIN_UTXD0, PIN_URXD0, PIN_RTS0, 0, PMUX_UTXD0, PMUX_URXD0, UART0_TXPO, UART0_RXPO, UART0_GEN_SRC, GEN_MCK_CLK, &UART0_DMA);

#endif

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#include <time_imp.h>
#include <DMA\DMA_imp.h>

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#ifdef CPU_SAME53

#include <FLASH\FlashInt_imp.h>
static FlashInt bootFlash;

#elif defined(CPU_BF607)

#include "SPIM_imp.h"

#define FLASHSPI_IMP_V2
//#define ADSP_CHECKFLASH
#define AT25_SPI_BAUD_RATE 	25000000
#define BAUD_RATE_DIVISOR 	(SCLK/AT25_SPI_BAUD_RATE-1)
//#define FLASH_QPI_MODE 

static SPI_DSC_CS spi_dsc_cs[1] = { { HW::PIOD, PD11, BAUD2SPI(AT25_SPI_BAUD_RATE), 0 } };

static S_SPIM	spi(0, spi_dsc_cs, ArraySize(spi_dsc_cs), SCLK, PD0|PD1|PD2|PD3|PD4);


#include <FLASH\FlashSPI_imp_v2.h>
static FlashSPI bootFlash(spi);

#endif

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#include <BOOT\boot_com_emac_imp_v2.h>

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++




//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
